<ion-content [fullscreen]="true" color="primary">
  <div class="top-center">
    <ion-card>
      <ion-card-header *ngIf="getUser$ | async as userInfo">
        <ion-card-title>{{ userInfo.name }} </ion-card-title>
        <ion-card-subtitle>Credits: ${{ userInfo.credits }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <div *ngIf="topUp">
          <form [formGroup]="creditForm">
            <ion-input
              type="tel"
              label="Amount: "
              color="primary"
              fill="solid"
              value=""
              formControlName="amount"
              errorText="Top-up can be only positive"
            ></ion-input>
          </form>
          <ion-button color="warning" size="block" (click)="topUpCredit()"
            >Send money</ion-button
          >
        </div>
        <ion-button color="primary" size="block" (click)="topUp=!topUp"
          >{{topUp ? 'Cancel' : 'Top-up credits'}}</ion-button
        >
      </ion-card-content>
    </ion-card>
    <ion-card *ngIf="getBoughtItems$ | async as boughtItems">
      <ion-card-content>
        <ion-card-title>Bought items</ion-card-title>
        <div *ngFor="let item of boughtItems">
          <h3 style="margin-bottom: 0">{{ item.name}}</h3>
          <p style="margin-top: 0">
            {{ item.seller!.name}} / {{ item.seller!.email}}
          </p>
        </div>
      </ion-card-content>
    </ion-card>
    <ion-card *ngIf="getSoldItems$ | async as soldItems">
      <ion-card-content>
        <ion-card-title>Sold items</ion-card-title>
        <div *ngFor="let item of soldItems">
          <h3 style="margin-bottom: 0">{{ item.name}}</h3>
          <p style="margin-top: 0">
            {{ item.buyer!.name}} / {{ item.buyer!.email}}
          </p>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
